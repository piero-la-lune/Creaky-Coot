function isset(e){return e!==void 0&&null!==e}function Ajax(e,n){this.post=[],this.elm=void 0,this.loader=void 0,e&&(this.elm=e,this.loader=document.createElement("span"),this.loader.className="loading",this.loader.innerHTML='<i class="n1"></i><i class="n2"></i><i class="n3"></i>',this.elm.parentNode.replaceChild(this.loader,this.elm)),this.post.push("action="+n),this.post.push("page="+page),this.addParam=function(e,n){this.post.push(e+"="+encodeURIComponent(n))},this.send=function(e,n){var t=this,i=new XMLHttpRequest;i.open("POST",ajax_url),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(this.post.join("&")),i.onreadystatechange=function(){if(i.readyState==i.DONE){if(200==i.status){var a=JSON.parse(i.responseText);"success"==a.status?e!==void 0&&e(a):n!==void 0&&n(a)}else alert(m_error_ajax);t.cancel()}}},this.cancel=function(){this.loader&&this.loader.parentNode.replaceChild(this.elm,this.loader)}}function onclick_logout(){document.getElementById("form-logout").submit()}function onclick_load(e,n){var t=new Ajax(e,"load"),i=document.querySelectorAll(".div-link");i.length>0&&t.addParam("id",i[i.length-1].id.split("-")[1]),"undefined"!=typeof feed&&t.addParam("feed",feed),"undefined"!=typeof tag&&t.addParam("tag",tag),"undefined"!=typeof q&&t.addParam("q",q),n.type!==void 0&&t.addParam("type",n.type),t.send(function(e){var n=document.createElement("div");n.innerHTML=e.html;var t=document.querySelector(".p-more");t.parentNode.insertBefore(n,t)},function(){t.elm=document.createElement("span"),t.elm.innerHTML=m_no_more_link})}function onclick_refresh(e){var n=new Ajax(e,"refresh");return"undefined"!=typeof tag?(n.cancel(),!1):"undefined"!=typeof q?(n.cancel(),!1):("undefined"!=typeof feed&&n.addParam("feed",feed),n.send(function(e){var n=document.createElement("div");n.innerHTML=e.html;var t=document.querySelector(".div-link");t||(t=document.querySelector(".p-more")),t.parentNode.insertBefore(n,t)}),void 0)}function onclick_allRead(e){for(var n=new Ajax(e,"read"),t=[],i=document.querySelectorAll(".div-link"),a=0;i.length>a;a++)t.push(i[a].id.split("-")[1]);n.addParam("ids",t.join(",")),n.send(function(e){for(var n in e.ids){var t=document.getElementById("link-"+n);if("links"==page)t.querySelector("h2").className="",t.querySelector(".a-read").style.display="none",t.querySelector(".a-unread").style.display="inline-block";else{var i=t.parentNode;i.removeChild(t)}}})}function onclick_allClear(e){if(!confirm(m_confirm_clear))return!1;for(var n=new Ajax(e,"clear"),t=[],i=document.querySelectorAll(".div-link"),a=0;i.length>a;a++)t.push(i[a].id.split("-")[1]);n.addParam("ids",t.join(",")),n.send(function(e){for(var n in e.ids){var t=document.getElementById("link-"+n);t.parentNode.removeChild(t)}})}function onclick_read(e,n){var t=new Ajax(e,"read");t.addParam("ids",n.id),t.send(function(t){if(t.ids[n.id]===void 0)return!1;var i=document.getElementById("link-"+n.id);"home"==page?i.parentNode.removeChild(i):("links"==page&&(i.querySelector("h2").className=""),e.style.display="none",i.querySelector(".a-unread").style.display="inline-block")})}function onclick_unread(e,n){var t=new Ajax(e,"unread");t.addParam("ids",n.id),t.send(function(t){if(t.ids[n.id]===void 0)return!1;var i=document.getElementById("link-"+n.id);"links"==page&&(i.querySelector("h2").className="unread"),e.style.display="none",i.querySelector(".a-read").style.display="inline-block"})}function onclick_archive(e,n){var t=new Ajax(e,"archive");t.addParam("ids",n.id),t.send(function(t){if(t.ids[n.id]===void 0)return!1;var i=document.getElementById("link-"+n.id);"home"==page?i.parentNode.removeChild(i):("links"==page&&(i.querySelector("h2").className=""),i.querySelector(".a-read").style.display="none",i.querySelector(".a-unread").style.display="none",e.style.display="none")})}function onclick_delete(e,n){if(!confirm(m_confirm_delete))return!1;var t=new Ajax(e,"delete");t.addParam("ids",n.id),t.send(function(e){if(e.ids[n.id]===void 0)return!1;if("link"==page)window.location.href=home_url;else{var t=document.getElementById("link-"+n.id);t.parentNode.removeChild(t)}})}function onclick_edit(e,n){var t={title:document.querySelector("h1"),content:document.querySelector(".div-content"),tags:document.querySelector(".tags"),comment:document.querySelector(".div-comment"),url:document.querySelector(".p-url"),actions:document.querySelectorAll(".div-actions")},i={tags:document.getElementById("tags"),comment:document.getElementById("comment")},a=t.title.innerHTML,d=t.content.innerHTML,o=t.actions[1].querySelectorAll("a")[0],l=t.actions[1].querySelectorAll("a")[1];t.title.setAttribute("contenteditable",!0),t.content.setAttribute("contenteditable",!0),t.tags.style.display="none",t.comment.style.display="none",t.url.style.display="none",i.comment.style.display="block",i.tags.style.display="block",t.actions[0].style.display="none",t.actions[1].style.display="block",o.onclick=function(){var e=new Ajax(o,"edit");e.addParam("id",n.id),e.addParam("title",t.title.innerHTML),e.addParam("content",t.content.innerHTML),e.addParam("tags",i.tags.value),e.addParam("comment",i.comment.value),e.send(function(e){a=e.title,d=e.content,l.click(),t.tags.innerHTML=e.tags_list,t.comment.innerHTML=e.comment,i.tags.value=e.tags.join(", "),i.comment.value=e.comment})},l.onclick=function(){t.title.setAttribute("contenteditable",!1),t.content.setAttribute("contenteditable",!1),t.title.innerHTML=a,t.content.innerHTML=d,t.tags.style.display="inline",t.comment.style.display="block",t.url.style.display="block",i.tags.style.display="none",i.comment.style.display="none",t.actions[0].style.display="block",t.actions[1].style.display="none"}}function onclick_clear_feed(e,n){if(!confirm(m_confirm_clear_f))return!1;var t=new Ajax(e,"clear_feed");t.addParam("feed",n.id),t.send()}function onclick_delete_feed(e,n){if(!confirm(m_confirm_delete_f))return!1;var t=new Ajax(e,"delete_feed");t.addParam("feed",n.id),t.send(function(){var e=document.getElementById("feed-"+n.id);e.parentNode.removeChild(e)})}function onclick_js_add(){alert(m_add_popup),document.getElementById("js_add").style.display="block"}