function isset(a){return a!==void 0&&null!==a}function Ajax(a,b){this.post=[],this.elm=void 0,this.loader=void 0,a&&(this.elm=a,this.loader=document.createElement("span"),this.loader.className="loading",this.loader.innerHTML='<i class="n1"></i><i class="n2"></i><i class="n3"></i>',this.elm.parentNode.replaceChild(this.loader,this.elm)),this.post.push("action="+b),this.post.push("page="+page),this.addParam=function(a,b){this.post.push(a+"="+encodeURIComponent(b))},this.send=function(a,b){var c=this,d=new XMLHttpRequest;d.open("POST",ajax_url),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(this.post.join("&")),d.onreadystatechange=function(){if(d.readyState==d.DONE){if(200==d.status){var e=JSON.parse(d.responseText);"success"==e.status?a!==void 0&&a(e):b!==void 0&&b(e)}else alert(m_error_ajax);c.cancel()}}},this.cancel=function(){this.loader&&this.loader.parentNode.replaceChild(this.elm,this.loader)}}function onclick_logout(){document.getElementById("form-logout").submit()}function onclick_load(a,b){var c=new Ajax(a,"load"),d=document.querySelectorAll(".div-link");d.length>0&&c.addParam("id",d[d.length-1].id.split("-")[1]),"undefined"!=typeof feed&&c.addParam("feed",feed),"undefined"!=typeof tag&&c.addParam("tag",tag),"undefined"!=typeof q&&c.addParam("q",q),b.type!==void 0&&c.addParam("type",b.type),c.send(function(a){var b=document.createElement("div");b.innerHTML=a.html;var c=document.querySelector(".p-more");c.parentNode.insertBefore(b,c)},function(){c.elm=document.createElement("span"),c.elm.innerHTML=m_no_more_link})}function onclick_refresh(a){var c=new Ajax(a,"refresh");return"undefined"!=typeof tag?(c.cancel(),!1):"undefined"!=typeof q?(c.cancel(),!1):("undefined"!=typeof feed&&c.addParam("feed",feed),c.send(function(a){var b=document.createElement("div");b.innerHTML=a.html;var c=document.querySelector(".div-link");c||(c=document.querySelector(".p-more")),c.parentNode.insertBefore(b,c)}),void 0)}function onclick_allRead(a){for(var c=new Ajax(a,"read"),d=[],e=document.querySelectorAll(".div-link"),f=0;e.length>f;f++)d.push(e[f].id.split("-")[1]);c.addParam("ids",d.join(",")),c.send(function(a){for(var b in a.ids){var c=document.getElementById("link-"+b);if("links"==page)c.querySelector("h2").className="",c.querySelector(".a-read").style.display="none",c.querySelector(".a-unread").style.display="inline-block";else{var d=c.parentNode;d.removeChild(c)}}})}function onclick_allClear(a){if(!confirm(m_confirm_clear))return!1;for(var c=new Ajax(a,"clear"),d=[],e=document.querySelectorAll(".div-link"),f=0;e.length>f;f++)d.push(e[f].id.split("-")[1]);c.addParam("ids",d.join(",")),c.send(function(a){for(var b in a.ids){var c=document.getElementById("link-"+b);c.parentNode.removeChild(c)}})}function onclick_read(a,b){var c=new Ajax(a,"read");c.addParam("ids",b.id),c.send(function(c){if(c.ids[b.id]===void 0)return!1;var d=document.getElementById("link-"+b.id);"home"==page?d.parentNode.removeChild(d):("links"==page&&(d.querySelector("h2").className=""),a.style.display="none",d.querySelector(".a-unread").style.display="inline-block")})}function onclick_unread(a,b){var c=new Ajax(a,"unread");c.addParam("ids",b.id),c.send(function(c){if(c.ids[b.id]===void 0)return!1;var d=document.getElementById("link-"+b.id);"links"==page&&(d.querySelector("h2").className="unread"),a.style.display="none",d.querySelector(".a-read").style.display="inline-block"})}function onclick_archive(a,b){var c=new Ajax(a,"archive");c.addParam("ids",b.id),c.send(function(c){if(c.ids[b.id]===void 0)return!1;var d=document.getElementById("link-"+b.id);"home"==page?d.parentNode.removeChild(d):("links"==page&&(d.querySelector("h2").className=""),d.querySelector(".a-read").style.display="none",d.querySelector(".a-unread").style.display="none",a.style.display="none")})}function onclick_delete(a,b){if(!confirm(m_confirm_delete))return!1;var c=new Ajax(a,"delete");c.addParam("ids",b.id),c.send(function(a){if(a.ids[b.id]===void 0)return!1;if("link"==page)window.location.href=home_url;else{var c=document.getElementById("link-"+b.id);c.parentNode.removeChild(c)}})}function onclick_edit(a,b){var c={title:document.querySelector("h1"),content:document.querySelector(".div-content"),tags:document.querySelector(".tags"),comment:document.querySelector(".div-comment"),url:document.querySelector(".p-url"),actions:document.querySelectorAll(".div-actions")},d={tags:document.getElementById("tags"),comment:document.getElementById("comment")},e=c.title.innerHTML,f=c.content.innerHTML,g=c.actions[1].querySelectorAll("a")[0],h=c.actions[1].querySelectorAll("a")[1];c.title.setAttribute("contenteditable",!0),c.content.setAttribute("contenteditable",!0),c.tags.style.display="none",c.comment.style.display="none",c.url.style.display="none",d.comment.style.display="block",d.tags.style.display="block",c.actions[0].style.display="none",c.actions[1].style.display="block",g.onclick=function(){var a=new Ajax(g,"edit");a.addParam("id",b.id),a.addParam("title",c.title.innerHTML),a.addParam("content",c.content.innerHTML),a.addParam("tags",d.tags.value),a.addParam("comment",d.comment.value),a.send(function(a){e=a.title,f=a.content,h.click(),c.tags.innerHTML=a.tags_list,c.comment.innerHTML=a.comment,d.tags.value=a.tags.join(", "),d.comment.value=a.comment})},h.onclick=function(){c.title.setAttribute("contenteditable",!1),c.content.setAttribute("contenteditable",!1),c.title.innerHTML=e,c.content.innerHTML=f,c.tags.style.display="inline",c.comment.style.display="block",c.url.style.display="block",d.tags.style.display="none",d.comment.style.display="none",c.actions[0].style.display="block",c.actions[1].style.display="none"}}function onclick_clear_feed(a,b){if(!confirm(m_confirm_clear_f))return!1;var c=new Ajax(a,"clear_feed");c.addParam("feed",b.id),c.send()}function onclick_delete_feed(a,b){if(!confirm(m_confirm_delete_f))return!1;var c=new Ajax(a,"delete_feed");c.addParam("feed",b.id),c.send(function(){var a=document.getElementById("feed-"+b.id);a.parentNode.removeChild(a)})}function onclick_js_add(){alert(m_add_popup),document.getElementById("js_add").style.display="block"}